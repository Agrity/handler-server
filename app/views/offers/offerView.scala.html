@(offer: Offer)

<style>
  .demo-list-icon {
    width: 300px;
  }
</style>

@display_grower(grower: Grower) = {
  <a class="mdl-button mdl-js-button mdl-button--raised mdl-button--colored" href="/html/growers/@grower.getId()">
    @grower.getFullName()
  </a>
}

@display_grower_list(growers: List[Grower]) =  {
  <ul class="demo-list-icon mdl-list">
    @for(grower <- growers) {
      <li class="mdl-list__item">
        <span class="mdl-list__item-primary-content">
          <i class="material-icons mdl-list__item-icon">person</i>
          @display_grower(grower)
        </span>
      </li>
    }
  </ul>
}

@main(title = "View Offer") {

  <div class="mdl-grid">

    <div class="mdl-cell mdl-cell--6-col">

      <h3><b>Offer Details</b></h3>

      <div class="mdl-grid">
        <div class="mdl-cell mdl-cell--6-col">
          <h5><b>Almond Variety</b></h5>
          <h5><b>Almond Pounds</b></h5>
          <h5><b>Price Per Pound</b></h5>
          <h5><b>Payment Date</b></h5>

          <br />

          <h5><b>Almond Size</b></h5>
          <h5><b>Almond Quality</b></h5>


        </div>
        <div class="mdl-cell mdl-cell--6-col">
          <h5>@offer.getAlmondVariety()</h5>
          <h5>@offer.getAlmondPoundsString() lbs</h5>
          <h5>@offer.getPricePerPound()</h5>
          <h5>Feature Under Construction</h5>

          <br />

          <h5>Feature Under Construction</h5>
          <h5>Feature Under Construction</h5>
        </div>

      </div>
    </div>

    <div class="mdl-cell mdl-cell--6-col">


      <h5><b>Accepted Growers</b></h5>
      @display_grower_list(offer.getAcceptedGrowers())
      <hr />

      <h5><b>Rejected Growers</b></h5>
      @display_grower_list(offer.getRejectedGrowers())
      <hr />

      <h5><b>Call Requested Growers</b></h5>
      @display_grower_list(offer.getCallRequestedGrowers())
      <hr />

      <h5><b>No Response Growers</b></h5>
      @display_grower_list(offer.getNoResponseGrowers())
      <hr />
    
      <button class="mdl-button mdl-js-button mdl-button--raised mdl-button--colored" onclick"sendOffer()">
        Send Offer to Growers
      </button>

    
    </div>
  </div>
  <script>
    function sendOffer() {
      console.log("Sending Offer!");
      var xhttp = new XMLHttpRequest();
      xhttp.onreadystatechange = function() {
        if (xhttp.readyState == 4 && xhttp.status == 200) {
          alert(xhttp.responseText);
        } else {
          allet("ERROR: " + alert(xhttp.responseText);
        }
      };
      xhttp.open("GET", "/offers/@offer.getId()/send", false);
      xhttp.send();
    }
  </script>

}
